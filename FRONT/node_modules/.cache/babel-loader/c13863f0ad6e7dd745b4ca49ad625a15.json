{"ast":null,"code":"export default {\n  props: ['onRefresh'],\n\n  data() {\n    return {\n      isNew: false,\n      isModify: false,\n      toModify: 0,\n      posts: [],\n      description: '',\n      image: '',\n      file: ''\n    };\n  },\n\n  methods: {\n    onToggleUpdate: function (id) {\n      this.toModify = id;\n      this.isModify = !this.isModify;\n    },\n    NewPost: function () {\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\n      const token = JSON.parse(localStorage.getItem(\"token\"));\n      let formData = new FormData();\n      formData.append('userId', userId);\n      formData.append('post', this.description);\n      formData.append('image', this.file);\n      formData.append('prenom', 'Alex');\n      formData.append('nom', 'alex');\n      fetch('http://localhost:3000/api/posts', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}` // 'Content-Type': 'multipart/form-data',\n\n        },\n        body: formData\n      }).then(response => response.json()).then(data => {\n        this.onRefresh();\n        console.log(data);\n      }).catch(error => console.log(error));\n    },\n    // onRefresh: function() {\n    //   fetch('http://localhost:3000/api/posts')\n    //   .then(res => res.json())\n    //   .then(data => this.posts = data)\n    //   .catch(err => console.log(err.message))\n    // },\n    onFileChange: function (event) {\n      this.file = event.target.files[0];\n    }\n  }\n};","map":{"version":3,"mappings":"AAuBI,eAAe;EACjBA,KAAK,EAAE,CAAC,WAAD,CADU;;EAEjBC,IAAI,GAAE;IACJ,OAAM;MACLC,KAAK,EAAE,KADF;MAELC,QAAQ,EAAE,KAFL;MAGLC,QAAQ,EAAE,CAHL;MAILC,KAAK,EAAE,EAJF;MAKLC,WAAW,EAAE,EALR;MAMLC,KAAK,EAAE,EANF;MAOLC,IAAI,EAAE;IAPD,CAAN;EASD,CAZgB;;EAajBC,OAAO,EAAE;IACPC,cAAc,EAAE,UAASC,EAAT,EAAa;MAC3B,KAAKP,QAAL,GAAgBO,EAAhB;MACA,KAAKR,QAAL,GAAgB,CAAC,KAAKA,QAAtB;IACD,CAJM;IAKPS,OAAO,EAAE,YAAY;MACnB,MAAMC,MAAK,GAAIC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAf;MACA,MAAMC,KAAI,GAAIJ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAd;MAEA,IAAIE,QAAO,GAAI,IAAIC,QAAJ,EAAf;MACAD,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BR,MAA1B;MACAM,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuB,KAAKf,WAA5B;MACAa,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAwB,KAAKb,IAA7B;MACAW,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,MAA1B;MACAF,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuB,MAAvB;MAEAC,KAAK,CAAC,iCAAD,EAAoC;QACvCC,MAAM,EAAE,MAD+B;QAEvCC,OAAO,EAAE;UACL,iBAAkB,UAASN,KAAM,EAD5B,CAEL;;QAFK,CAF8B;QAMvCO,IAAI,EAAEN;MANiC,CAApC,CAAL,CAQCO,IARD,CAQMC,QAAO,IAAKA,QAAQ,CAACC,IAAT,EARlB,EASCF,IATD,CASMzB,IAAG,IAAK;QACZ,KAAK4B,SAAL;QACAC,OAAO,CAACC,GAAR,CAAY9B,IAAZ;MACD,CAZD,EAaC+B,KAbD,CAaOC,KAAI,IAAKH,OAAO,CAACC,GAAR,CAAYE,KAAZ,CAbhB;IAcD,CA9BM;IA+BP;IACA;IACA;IACA;IACA;IACA;IACAC,YAAY,EAAE,UAAUC,KAAV,EAAiB;MAC7B,KAAK3B,IAAL,GAAY2B,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAZ;IACD;EAvCM;AAbQ,CAAf","names":["props","data","isNew","isModify","toModify","posts","description","image","file","methods","onToggleUpdate","id","NewPost","userId","JSON","parse","localStorage","getItem","token","formData","FormData","append","fetch","method","headers","body","then","response","json","onRefresh","console","log","catch","error","onFileChange","event","target","files"],"sourceRoot":"","sources":["C:\\Users\\Alex_PC\\Desktop\\P7_Projet\\_FRONT\\groupomania\\src\\components\\NewComponent.vue"],"sourcesContent":["<template>\r\n    <div v-show=\"isNew\" class=\"new_modal\" >\r\n    <form enctype=\"multipart/form-data\">\r\n    <div class=\"new_modal_box\">\r\n      <div class=\"new_modal_box_head\">\r\n        <p>Nouveau Message</p>\r\n      </div>\r\n      <div class=\"new_modal_box__body\">\r\n        <input v-model=\"description\" type=\"text\" placeholder=\"Ã‰crire un message...\"><br>\r\n        <div class=\"new_modal_box_body_image\">\r\n          <input @change=\"onFileChange( $event )\" type=\"file\" id=\"avatar\" name=\"avatar\" accept=\"image/png, image/jpeg\">\r\n        </div>\r\n      </div>\r\n      <div class=\"new_modal_box_footer\">\r\n        <button @click.prevent=\"NewPost()\"><a>Envoyer</a></button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n  </div>\r\n  <div class=\"new\" v-on:click=\"isNew = !isNew\"><a>+</a></div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n  props: ['onRefresh'],\r\n  data(){\r\n    return{\r\n     isNew: false,\r\n     isModify: false,\r\n     toModify: 0,\r\n     posts: [],\r\n     description: '',\r\n     image: '',\r\n     file: '',\r\n    }\r\n  },\r\n  methods: {\r\n    onToggleUpdate: function(id) {\r\n      this.toModify = id\r\n      this.isModify = !this.isModify\r\n    },\r\n    NewPost: function () {\r\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\r\n      const token = JSON.parse(localStorage.getItem(\"token\"));\r\n\r\n      let formData = new FormData();\r\n      formData.append('userId', userId);\r\n      formData.append('post',this.description);\r\n      formData.append('image',this.file);\r\n      formData.append('prenom', 'Alex');\r\n      formData.append('nom', 'alex');\r\n\r\n      fetch('http://localhost:3000/api/posts', {\r\n        method: 'POST',\r\n        headers: { \r\n            'Authorization': `Bearer ${token}`,\r\n            // 'Content-Type': 'multipart/form-data',\r\n        },\r\n        body: formData\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        this.onRefresh()\r\n        console.log(data)\r\n      })\r\n      .catch(error => console.log(error))\r\n    },\r\n    // onRefresh: function() {\r\n    //   fetch('http://localhost:3000/api/posts')\r\n    //   .then(res => res.json())\r\n    //   .then(data => this.posts = data)\r\n    //   .catch(err => console.log(err.message))\r\n    // },\r\n    onFileChange: function( event ){\r\n      this.file = event.target.files[0];\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.container{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: 50px;\r\n}\r\n.post{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 50px;\r\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.post_head{\r\n  background-color: #4E5166 ;\r\n}\r\n\r\n.post_head p{\r\n  color: white;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_body{\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post_body img{\r\n  width: 400px;\r\n}\r\n\r\n.post_body p{\r\n  font-size: 16px;\r\n}\r\n\r\n.post_footer{\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_footer_review{\r\n  display: flex;\r\n}\r\n\r\n.post_footer_review a{\r\n  display: flex;\r\n  align-items: center;\r\n  text-decoration: none;\r\n}\r\n\r\n.post_footer_review i{\r\n  font-size: 22px;\r\n}\r\n\r\n.post_footer_modify a{\r\n  text-decoration: underline;\r\n}\r\n\r\n.like{\r\n  color: #FFD7D7;\r\n}\r\n\r\n.post_footer{\r\n  color: #FD2D01;\r\n  font-size: 18px;\r\n}\r\n\r\n.post_footer p{\r\n  padding: 6px;\r\n}\r\n\r\n.post_footer a{\r\n  color: #FD2D01;\r\n  padding: 6px;\r\n}\r\n\r\n.post_admin{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 50px;\r\n   box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.post_head_admin{\r\n  background-color: #FFD7D7 ;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.post_head_admin p{\r\n  color: #FD2D01;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_head_admin .badge p{\r\n  background-color: #fff;\r\n  padding: 0;\r\n  margin-top: 8px;\r\n  margin-right: 10px;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.new_modal{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 120px;\r\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin-right: 40px;\r\n  background-color: #fff;\r\n}\r\n\r\n.new_modal_box_head{\r\n  background-color: #4E5166 ;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.new_modal_box_head p{\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n  color: white;;\r\n}\r\n\r\n.new_modal_box__body{\r\n  padding: 8px;\r\n  margin-left: 36px;\r\n  margin-right: 36px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start\r\n}\r\n\r\n.new_modal_box__body input{\r\n  width: 100%;\r\n  padding-bottom: 140px;\r\n  padding-top: 20px;\r\n  padding-left: 20px;\r\n}\r\n\r\n.new_modal_box_body_image input{\r\n  padding: 0;\r\n}\r\n\r\n.new_modal_box_footer{\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.new_modal_box_footer button{\r\n    background-color: #FD2D01;\r\n    border: 0;\r\n    padding: 6px;\r\n    margin-right: 36px;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.new_modal_box_footer a{\r\n    color: white;\r\n    text-transform: uppercase;\r\n    font-size: 14px;\r\n    padding-left: 20px;\r\n    padding-right: 20px;\r\n    text-decoration: none;\r\n}\r\n\r\n.new{\r\n  height: 64px;\r\n  width: 64px;\r\n  font-size: 64px;\r\n  background-color: #FD2D01;\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  border-radius: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n  margin-right: 40px;\r\n  cursor: pointer;\r\n}\r\n\r\n.new a{\r\n  color: #fff;\r\n  margin-top: -10px;\r\n  text-decoration: none;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}