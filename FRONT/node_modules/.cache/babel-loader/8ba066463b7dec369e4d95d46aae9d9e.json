{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withCtx as _withCtx, withModifiers as _withModifiers, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7787917f\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"post\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"post_head\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", null, \"Connexion\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  key: 0,\n  class: \"alert_error\",\n  id: \"errorAlert\"\n};\nconst _hoisted_5 = {\n  class: \"post_body\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Email\", -1\n/* HOISTED */\n));\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Mot de passe\", -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"already\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"Pas de compte ? Inscrivez-vous \");\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"ici\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HeaderView = _resolveComponent(\"HeaderView\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_router_view = _resolveComponent(\"router-view\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", null, [_createVNode(_component_HeaderView)]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createCommentVNode(\" <div v-if=\\\"errorAlert\\\" class=\\\"alert_error\\\" id=\\\"alert\\\"><a>L'utilisateur a déjà liké le post !</a></div> \"), _ctx.errorAlert ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"a\", null, _toDisplayString(_ctx.errorAlertMessage), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.email = $event),\n    type: \"email\",\n    placeholder: \"Email\",\n    required: \"\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.email]]), _hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.password = $event),\n    type: \"password\",\n    placeholder: \"Mot de passe\",\n    required: \"\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.password]]), _createElementVNode(\"p\", _hoisted_8, [_hoisted_9, _createElementVNode(\"a\", null, [_createVNode(_component_router_link, {\n    to: \"/inscription\"\n  }, {\n    default: _withCtx(() => [_hoisted_10]),\n    _: 1\n    /* STABLE */\n\n  })])]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = _withModifiers($event => $options.logIn(), [\"prevent\"]))\n  }, \"Connexion\")]), _createVNode(_component_router_view)])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;EAIOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;gEACTC,oBAEM,KAFN,EAEM;EAFDD,KAAK,EAAC;AAEL,CAFN,EAAsB,cACpBC,oBAAgB,GAAhB,EAAgB,IAAhB,EAAG,WAAH,CADoB,CAAtB;;AAAA;;;;EAIuBD,KAAK,EAAC;EAAcE,EAAE,EAAC;;;EACzCF,KAAK,EAAC;;;gEACTC,oBAAY,GAAZ,EAAY,IAAZ,EAAG,OAAH,EAAQ;AAAA;AAAR;;gEAEAA,oBAAmB,GAAnB,EAAmB,IAAnB,EAAG,cAAH,EAAe;AAAA;AAAf;;;EAEGD,KAAK,EAAC;;;iDAAU;;kDAAiE;;;;;;;;;6DAf1FC,oBAEM,KAFN,EAEM,IAFN,EAEM,CADJE,aAAcC,qBAAd,CACI,CAFN,GAGAH,oBAiBM,KAjBN,cAiBM,CAhBJA,oBAeM,KAfN,cAeM,CAdJI,UAcI,EAXJC,qIAWI,EAVOC,iCAAXC,oBAA+F,KAA/F,cAA+F,CAApCP,oBAA8B,GAA9B,EAA8B,IAA9B,EAA8BQ,iBAAxBF,sBAAwB,CAA9B,EAAuB;EAAA;EAAvB,CAAoC,CAA/F,sCAUI,EATJN,oBAOM,KAPN,cAOM,CANJS,UAMI,kBALJT,oBAAiE,OAAjE,EAAiE;+DAAjDM,aAAKI,OAA4C;IAA1CC,IAAI,EAAC,OAAqC;IAA7BC,WAAW,EAAC,OAAiB;IAATC,QAAQ,EAAR;EAAS,CAAjE;;EAAA,kBAAgBP,aAKZ,EAJJQ,UAII,kBAHJd,oBAA8E,OAA9E,EAA8E;+DAA9DM,gBAAQI,OAAsD;IAApDC,IAAI,EAAC,UAA+C;IAApCC,WAAW,EAAC,cAAwB;IAATC,QAAQ,EAAR;EAAS,CAA9E;;EAAA,kBAAgBP,gBAGZ,EAFJN,oBAA6G,GAA7G,cAA6G,aAA3DA,oBAAuD,GAAvD,EAAuD,IAAvD,EAAuD,CAApDE,aAAgDa,sBAAhD,EAAgD;IAAnCC,EAAE,EAAC;EAAgC,CAAhD,EAA8B;sBAAC,MAAG,cAAJ;;;;EAAA,CAA9B,CAAoD,CAAvD,CAA2D,CAA7G,CAEI,EADJhB,oBAAmD,QAAnD,EAAmD;IAA1CiB,OAAK,qDAAUC,gBAAV,EAAe,WAAf;EAAqC,CAAnD,EAAiC,WAAjC,CACI,CAPN,CASI,EADJhB,aAAeiB,sBAAf,CACI,CAfN,CAgBI,CAjBN","names":["class","_createElementVNode","id","_createVNode","_component_HeaderView","_hoisted_3","_createCommentVNode","_ctx","_createElementBlock","_toDisplayString","_hoisted_6","$event","type","placeholder","required","_hoisted_7","_component_router_link","to","onClick","$options","_component_router_view"],"sourceRoot":"","sources":["C:\\Users\\Alex_PC\\Desktop\\P7_Projet\\_FRONT\\groupomania\\src\\views\\Connexion.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <HeaderView />\r\n  </div>\r\n  <div class=\"container\">\r\n    <div class=\"post\">\r\n      <div class=\"post_head\">\r\n        <p>Connexion</p>\r\n      </div>\r\n      <!-- <div v-if=\"errorAlert\" class=\"alert_error\" id=\"alert\"><a>L'utilisateur a déjà liké le post !</a></div> -->\r\n      <div v-if=\"errorAlert\" class=\"alert_error\" id=\"errorAlert\"><a>{{ errorAlertMessage }}</a></div>\r\n      <div class=\"post_body\">\r\n        <p>Email</p>\r\n        <input v-model=\"email\" type=\"email\" placeholder=\"Email\" required>\r\n        <p>Mot de passe</p>\r\n        <input v-model=\"password\" type=\"password\" placeholder=\"Mot de passe\" required>\r\n        <p class=\"already\">Pas de compte ? Inscrivez-vous <a><router-link to=\"/inscription\">ici</router-link></a></p>\r\n        <button @click.prevent=\"logIn()\">Connexion</button>\r\n      </div>\r\n      <router-view />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderView from '@/views/HeaderView.vue';\r\n\r\n\r\nexport default {\r\n  name: 'HelloWorld',\r\n  data: () => ({\r\n      email: '',\r\n      password: '',\r\n      errorAlert: false,\r\n      errorAlertMessage : 'Test',\r\n  }),\r\n  methods: {\r\n    logIn: function (){\r\n      fetch('http://localhost:3000/api/auth/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(\r\n          {\r\n            email: this.email, \r\n            password: this.password \r\n          })\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data)\r\n        localStorage.setItem('token', JSON.stringify(data.token));\r\n        localStorage.setItem('userId', JSON.stringify(data.userId));\r\n        if (status === 401) {\r\n                console.log('Utilisateur créé !')\r\n                this.errorAlert = true;\r\n              }\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n\r\n      // const response = this.$store.dispatch('LOGIN', {\r\n      //     email: this.email,\r\n      //     password: this.password\r\n      //   })\r\n      //   // localStorage.setItem('token', response.data.token)\r\n      //   .then(function () {\r\n      //     this.$router.push({ path: '/dashboard' })\r\n      //     console.log('Connexion réussi !');\r\n      //   }, function (error){\r\n      //     console.log(error);\r\n      //   }\r\n      //   )\r\n    }\r\n  },\r\n\r\n  components: {\r\n    HeaderView\r\n  },\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.container{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: 50px;\r\n}\r\n\r\n.post{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 50px;\r\n   box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.post_head{\r\n  background-color: #4E5166 ;\r\n  text-align: center;\r\n}\r\n\r\n.post_head p{\r\n  color: white;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_body{\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n  padding-right: 24px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post_body input{\r\n  width: 100%;\r\n  margin: 12px;\r\n  padding: 6px;\r\n}\r\n\r\n.post_body button{\r\n  background-color: #FD2D01;\r\n  border: 0;\r\n  padding: 6px;\r\n}\r\n\r\n.post_body button a{\r\n  text-decoration: none;\r\n  color: #fff;\r\n  font-size: 16px;\r\n}\r\n\r\n.post_body .already{\r\n  padding: 8px;\r\n}\r\n\r\n.post_body .already a{\r\n  color: #FD2D01;\r\n}\r\n.alert_error{\r\n  background-color: #FFD7D7;\r\n  padding: 12px;\r\n  margin-top: 12px;\r\n  text-align: center;\r\n}\r\n\r\n.alert_error a{\r\n \r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}