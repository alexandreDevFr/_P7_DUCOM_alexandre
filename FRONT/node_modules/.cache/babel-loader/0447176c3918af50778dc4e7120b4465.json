{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-043ff5bd\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"post\"\n};\nconst _hoisted_2 = {\n  class: \"post_head\"\n};\nconst _hoisted_3 = {\n  class: \"post_body\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"post_footer\"\n};\nconst _hoisted_6 = {\n  class: \"post_footer_review\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-thumbs-up like\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"post_footer_modify\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, _toDisplayString($props.post.nom) + \" \" + _toDisplayString($props.post.prenom) + \" le \" + _toDisplayString($props.post.date), 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $props.post.imageUrl,\n    alt: \"\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_4), _createElementVNode(\"p\", null, _toDisplayString($props.post.description), 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"a\", {\n    onClick: _cache[0] || (_cache[0] = _withModifiers($event => $options.Like($props.post), [\"prevent\"]))\n  }, [_hoisted_7, _createElementVNode(\"p\", null, \" (\" + _toDisplayString($props.post.likes) + \")\", 1\n  /* TEXT */\n  )])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"a\", {\n    onClick: _cache[1] || (_cache[1] = () => $options.onToggleUpdate($props.post._id))\n  }, \"Modifier\"), _createElementVNode(\"a\", {\n    onClick: _cache[2] || (_cache[2] = _withModifiers($event => $options.DelPost($props.post._id), [\"prevent\"]))\n  }, \"Supprimer\")])])]);\n}","map":{"version":3,"mappings":";;;;;EACSA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EAGNA,KAAK,EAAC;;;;EAINA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;gEACsBC,oBAA0C,GAA1C,EAA0C;EAAvCD,KAAK,EAAC;AAAiC,CAA1C,EAAqC,IAArC,EAAqC;AAAA;AAArC;;;EAE5BA,KAAK,EAAC;;;uBAZfE,oBAiBM,KAjBN,cAiBM,CAhBJD,oBAEM,KAFN,cAEM,CADJA,oBAA0D,GAA1D,EAA0D,IAA1D,EAA0DE,iBAApDC,YAAKC,GAA+C,IAAzC,GAAyC,GAAxCF,iBAAGC,YAAKE,MAAR,CAAwC,GAAvB,MAAuB,GAAnBH,iBAAGC,YAAKG,IAAR,CAAvC,EAAmD;EAAA;EAAnD,CACI,CAFN,CAgBI,EAbJN,oBAGM,KAHN,cAGM,CAFJA,oBAAiC,KAAjC,EAAiC;IAA3BO,GAAG,EAAEJ,YAAKK,QAAiB;IAAPC,GAAG,EAAC;EAAG,CAAjC;;EAAA,aAEI,EADJT,oBAA6B,GAA7B,EAA6B,IAA7B,EAA6BE,iBAAvBC,YAAKO,WAAkB,CAA7B,EAAsB;EAAA;EAAtB,CACI,CAHN,CAaI,EATJV,oBAQM,KARN,cAQM,CAPJA,oBAEM,KAFN,cAEM,CADJA,oBAAuG,GAAvG,EAAuG;IAAnGW,OAAK,qDAAUC,cAAKT,WAAL,CAAV,EAAmB,WAAnB;EAA8F,CAAvG,GAA+BU,YAA0Cb,oBAA0B,GAA1B,EAA0B,IAA1B,EAAG,OAAEE,iBAAGC,YAAKW,KAAR,CAAF,GAAkB,GAArB,EAAsB;EAAA;EAAtB,EAAzE,CACI,CAFN,CAOI,EAJJd,oBAGM,KAHN,cAGM,CAFJA,oBAA2D,GAA3D,EAA2D;IAAnDW,OAAK,kCAAQC,wBAAeT,YAAKY,GAApB,CAAR;EAA8C,CAA3D,EAA+C,UAA/C,CAEI,EADJf,oBAAmD,GAAnD,EAAmD;IAA/CW,OAAK,qDAAUC,iBAAQT,YAAKY,GAAb,CAAV,EAA0B,WAA1B;EAA0C,CAAnD,EAAsC,WAAtC,CACI,CAHN,CAII,CARN,CASI,CAjBN","names":["class","_createElementVNode","_createElementBlock","_toDisplayString","$props","nom","prenom","date","src","imageUrl","alt","description","onClick","$options","_hoisted_7","likes","_id"],"sourceRoot":"","sources":["C:\\Users\\Alex_PC\\Desktop\\P7_Projet\\_FRONT\\groupomania\\src\\components\\PostComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"post\">\r\n      <div class=\"post_head\">\r\n        <p>{{ post.nom }} {{ post.prenom }} le {{ post.date }}</p>\r\n      </div>\r\n      <div class=\"post_body\">\r\n        <img :src=\"post.imageUrl\" alt=\"\">\r\n        <p>{{ post.description }}</p>\r\n      </div>\r\n      <div class=\"post_footer\">\r\n        <div class=\"post_footer_review\">\r\n          <a @click.prevent=\"Like(post)\"><i class=\"fa-solid fa-thumbs-up like\"></i><p> ({{ post.likes }})</p></a>\r\n        </div>\r\n        <div class=\"post_footer_modify\">\r\n          <a v-on:click=\"() => onToggleUpdate(post._id)\">Modifier</a>\r\n          <a @click.prevent=\"DelPost(post._id)\">Supprimer</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n  props: ['onModify', 'post'],\r\n  data(){\r\n    return{\r\n     isNew: false,\r\n     isModify: false,\r\n     toModify: 0,\r\n     posts: [],\r\n     description: '',\r\n     image: '',\r\n     file: '',\r\n    }\r\n  },\r\n  methods: {\r\n    onToggleUpdate: function(id) {\r\n      this.toModify = id\r\n      this.isModify = !this.isModify\r\n    },\r\n    NewPost: function () {\r\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\r\n      const token = JSON.parse(localStorage.getItem(\"token\"));\r\n\r\n      let formData = new FormData();\r\n      formData.append('userId', userId);\r\n      formData.append('post',this.description);\r\n      formData.append('image',this.file);\r\n      formData.append('prenom', 'Alex');\r\n      formData.append('nom', 'alex');\r\n\r\n      fetch('http://localhost:3000/api/posts', {\r\n        method: 'POST',\r\n        headers: { \r\n            'Authorization': `Bearer ${token}`,\r\n            // 'Content-Type': 'multipart/form-data',\r\n        },\r\n        body: formData\r\n      })\r\n      .then(response => {\r\n        response.json()\r\n        this.$router.go()\r\n      })\r\n      .catch(error => console.log(error))\r\n    },\r\n    DelPost: function (_id) {\r\n      fetch('http://localhost:3000/api/posts')\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        this.posts = data\r\n      })\r\n      .catch(err => console.log(err.message))\r\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\r\n      const token = JSON.parse(localStorage.getItem(\"token\"));\r\n      fetch('http://localhost:3000/api/posts/'+ `${_id}`, {\r\n        method: 'DELETE',\r\n        headers: { \r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + `${token}`\r\n        },\r\n        body: JSON.stringify(\r\n          {\r\n            userId: userId,\r\n          })\r\n      })\r\n      .then(response => {\r\n        response.json()\r\n        console.log(response)\r\n        console.log(_id)\r\n        this.onRefresh()\r\n      })\r\n      .catch(error => console.log(error))\r\n    },\r\n    Like: function(post) {\r\n\r\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\r\n      const token = JSON.parse(localStorage.getItem(\"token\"));\r\n      const postId = post._id;\r\n      const postusersLiked = JSON.stringify(post.usersLiked);\r\n\r\n        fetch('http://localhost:3000/api/posts/'+ `${postId}` + '/like', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + `${token}`,\r\n            'Accept': 'application/json; charset=utf-8',\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(\r\n          {\r\n            userId: userId,\r\n            like : postusersLiked.includes(userId) ? -1 : 1,\r\n          })\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        this.onRefresh()\r\n        console.log(data)\r\n      })\r\n      .catch(error => console.log(error));\r\n    },\r\n    onRefresh: function() {\r\n      fetch('http://localhost:3000/api/posts')\r\n      .then(res => res.json())\r\n      .then(data => this.posts = data)\r\n      .catch(err => console.log(err.message))\r\n    },\r\n    onFileChange: function( event ){\r\n      this.file = event.target.files[0];\r\n    },\r\n  },\r\n  mounted(){\r\n    this.onRefresh()\r\n  },\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.container{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: 50px;\r\n}\r\n.post{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 50px;\r\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.post_head{\r\n  background-color: #4E5166 ;\r\n}\r\n\r\n.post_head p{\r\n  color: white;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_body{\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post_body img{\r\n  width: 400px;\r\n}\r\n\r\n.post_body p{\r\n  font-size: 16px;\r\n}\r\n\r\n.post_footer{\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_footer_review{\r\n  display: flex;\r\n}\r\n\r\n.post_footer_review a{\r\n  display: flex;\r\n  align-items: center;\r\n  text-decoration: none;\r\n}\r\n\r\n.post_footer_review i{\r\n  font-size: 22px;\r\n}\r\n\r\n.post_footer_modify a{\r\n  text-decoration: underline;\r\n}\r\n\r\n.like{\r\n  color: #FFD7D7;\r\n}\r\n\r\n.post_footer{\r\n  color: #FD2D01;\r\n  font-size: 18px;\r\n}\r\n\r\n.post_footer p{\r\n  padding: 6px;\r\n}\r\n\r\n.post_footer a{\r\n  color: #FD2D01;\r\n  padding: 6px;\r\n}\r\n\r\n.post_admin{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 50px;\r\n   box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.post_head_admin{\r\n  background-color: #FFD7D7 ;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.post_head_admin p{\r\n  color: #FD2D01;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_head_admin .badge p{\r\n  background-color: #fff;\r\n  padding: 0;\r\n  margin-top: 8px;\r\n  margin-right: 10px;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.new_modal{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 120px;\r\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin-right: 40px;\r\n  background-color: #fff;\r\n}\r\n\r\n.new_modal_box_head{\r\n  background-color: #4E5166 ;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.new_modal_box_head p{\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n  color: white;;\r\n}\r\n\r\n.new_modal_box__body{\r\n  padding: 8px;\r\n  margin-left: 36px;\r\n  margin-right: 36px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start\r\n}\r\n\r\n.new_modal_box__body input{\r\n  width: 100%;\r\n  padding-bottom: 140px;\r\n  padding-top: 20px;\r\n  padding-left: 20px;\r\n}\r\n\r\n.new_modal_box_body_image input{\r\n  padding: 0;\r\n}\r\n\r\n.new_modal_box_footer{\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.new_modal_box_footer button{\r\n    background-color: #FD2D01;\r\n    border: 0;\r\n    padding: 6px;\r\n    margin-right: 36px;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.new_modal_box_footer a{\r\n    color: white;\r\n    text-transform: uppercase;\r\n    font-size: 14px;\r\n    padding-left: 20px;\r\n    padding-right: 20px;\r\n    text-decoration: none;\r\n}\r\n\r\n.new{\r\n  height: 64px;\r\n  width: 64px;\r\n  font-size: 64px;\r\n  background-color: #FD2D01;\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  border-radius: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n  margin-right: 40px;\r\n  cursor: pointer;\r\n}\r\n\r\n.new a{\r\n  color: #fff;\r\n  margin-top: -10px;\r\n  text-decoration: none;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}