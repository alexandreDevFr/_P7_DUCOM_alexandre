{"ast":null,"code":"import HeaderView from '@/views/HeaderView.vue';\nexport default {\n  name: 'HelloWorld',\n  data: () => ({\n    email: '',\n    password: '',\n    errorAlert: false,\n    errorAlertMessage: 'Test',\n    errors: false,\n    errorMessage: null\n  }),\n  methods: {\n    logIn: function () {\n      let errorAlert = false;\n      let errorAlertMessage = 'Test';\n      fetch('http://localhost:3000/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.email,\n          password: this.password\n        })\n      }).then(response => response.json()).then(res => {\n        if (res.ok) {\n          return res.json(), console.log(res.token), console.log('Connecté'), errorAlertMessage = 'Connexion éffectué', errorAlert = true, localStorage.setItem('token', JSON.stringify(res.json.token)), localStorage.setItem('userId', JSON.stringify(res.userId));\n        } else {\n          return Promise.reject(res.status);\n        }\n      }).then(res => console.log(res)).catch(err => console.log(`Erreur avec le message : ${err}`)); //  fetch('http://localhost:3000/api/auth/login', {\n      //    method: 'POST',\n      //    headers: { 'Content-Type': 'application/json' },\n      //    body: JSON.stringify(\n      //      {\n      //        email: this.email, \n      //        password: this.password \n      //      })\n      //  })\n      //  .then(response => response.json())\n      //  .then(data => {\n      //    console.log(data)\n      //    localStorage.setItem('token', JSON.stringify(data.token));\n      //    localStorage.setItem('userId', JSON.stringify(data.userId));\n      //  })\n      //  .catch(error => console.log(\"Erreur : \" + error));\n    }\n  },\n  components: {\n    HeaderView\n  }\n};","map":{"version":3,"mappings":"AAyBA,OAAOA,UAAP,MAAuB,wBAAvB;AAEA,eAAe;EACbC,IAAI,EAAE,YADO;EAEbC,IAAI,EAAE,OAAO;IACTC,KAAK,EAAE,EADE;IAETC,QAAQ,EAAE,EAFD;IAGTC,UAAU,EAAE,KAHH;IAITC,iBAAgB,EAAI,MAJX;IAKTC,MAAM,EAAE,KALC;IAMTC,YAAY,EAAE;EANL,CAAP,CAFO;EAUbC,OAAO,EAAE;IACNC,KAAK,EAAE,YAAW;MACjB,IAAIL,UAAS,GAAI,KAAjB;MACA,IAAIC,iBAAgB,GAAI,MAAxB;MACAK,KAAK,CAAC,sCAAD,EAAyC;QAC1CC,MAAM,EAAE,MADkC;QAE1CC,OAAO,EAAE;UAAE,gBAAgB;QAAlB,CAFiC;QAG1CC,IAAI,EAAEC,IAAI,CAACC,SAAL,CACJ;UACEb,KAAK,EAAE,KAAKA,KADd;UAEEC,QAAQ,EAAE,KAAKA;QAFjB,CADI;MAHoC,CAAzC,CAAL,CASGa,IATH,CASQC,QAAO,IAAKA,QAAQ,CAACC,IAAT,EATpB,EAUGF,IAVH,CAUQG,GAAE,IAAK;QACX,IAAIA,GAAG,CAACC,EAAR,EAAW;UACT,OAAOD,GAAG,CAACD,IAAJ,IACPG,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,KAAhB,CADO,EAEPF,OAAO,CAACC,GAAR,CAAY,UAAZ,CAFO,EAGPjB,iBAAgB,GAAI,oBAHb,EAIPD,UAAS,GAAI,IAJN,EAKPoB,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BX,IAAI,CAACC,SAAL,CAAeI,GAAG,CAACD,IAAJ,CAASK,KAAxB,CAA9B,CALO,EAMPC,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BX,IAAI,CAACC,SAAL,CAAeI,GAAG,CAACO,MAAnB,CAA/B,CANA;QAOD,CARD,MAQK;UACH,OAAOC,OAAO,CAACC,MAAR,CAAeT,GAAG,CAACU,MAAnB,CAAP;QACF;MACD,CAtBH,EAuBGb,IAvBH,CAuBQG,GAAE,IAAKE,OAAO,CAACC,GAAR,CAAYH,GAAZ,CAvBf,EAwBGW,KAxBH,CAwBSC,GAAE,IAAKV,OAAO,CAACC,GAAR,CAAa,4BAA2BS,GAAI,EAA5C,CAxBhB,EAHiB,CAiCjB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;IAGD;EArDM,CAVI;EAmEbC,UAAU,EAAE;IACVjC;EADU;AAnEC,CAAf","names":["HeaderView","name","data","email","password","errorAlert","errorAlertMessage","errors","errorMessage","methods","logIn","fetch","method","headers","body","JSON","stringify","then","response","json","res","ok","console","log","token","localStorage","setItem","userId","Promise","reject","status","catch","err","components"],"sourceRoot":"","sources":["C:\\Users\\Alex_PC\\Desktop\\P7_Projet\\_FRONT\\groupomania\\src\\views\\Connexion.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <HeaderView />\r\n  </div>\r\n  <div class=\"container\">\r\n    <div class=\"post\">\r\n      <div class=\"post_head\">\r\n        <p>Connexion</p>\r\n      </div>\r\n      <!-- <div v-if=\"errorAlert\" class=\"alert_error\" id=\"alert\"><a>L'utilisateur a déjà liké le post !</a></div> -->\r\n      <div v-if=\"errorAlert\" class=\"alert_error\" id=\"alert\"><a>{{ errorAlertMessage }}</a></div>\r\n      <div class=\"post_body\">\r\n        <p>Email</p>\r\n        <input v-model=\"email\" type=\"email\" placeholder=\"Email\" required>\r\n        <p>Mot de passe</p>\r\n        <input v-model=\"password\" type=\"password\" placeholder=\"Mot de passe\" required>\r\n        <p class=\"already\">Pas de compte ? Inscrivez-vous <a><router-link to=\"/inscription\">ici</router-link></a></p>\r\n        <button @click.prevent=\"logIn()\">Connexion</button>\r\n      </div>\r\n      <router-view />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderView from '@/views/HeaderView.vue';\r\n\r\nexport default {\r\n  name: 'HelloWorld',\r\n  data: () => ({\r\n      email: '',\r\n      password: '',\r\n      errorAlert: false,\r\n      errorAlertMessage : 'Test',\r\n      errors: false,\r\n      errorMessage: null\r\n  }),\r\n  methods: {\r\n     logIn: function (){\r\n      let errorAlert = false\r\n      let errorAlertMessage = 'Test'\r\n      fetch('http://localhost:3000/api/auth/login', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(\r\n            {\r\n              email: this.email, \r\n              password: this.password \r\n            })\r\n        })\r\n        .then(response => response.json())\r\n        .then(res => {\r\n          if (res.ok){\r\n            return res.json(),\r\n            console.log(res.token),\r\n            console.log('Connecté'),\r\n            errorAlertMessage = 'Connexion éffectué',\r\n            errorAlert = true,\r\n            localStorage.setItem('token', JSON.stringify(res.json.token)),\r\n            localStorage.setItem('userId', JSON.stringify(res.userId))\r\n          }else{\r\n            return Promise.reject(res.status);\r\n          }\r\n        })\r\n        .then(res => console.log(res))\r\n        .catch(err => console.log(`Erreur avec le message : ${err}`))\r\n\r\n\r\n\r\n\r\n\r\n      //  fetch('http://localhost:3000/api/auth/login', {\r\n      //    method: 'POST',\r\n      //    headers: { 'Content-Type': 'application/json' },\r\n      //    body: JSON.stringify(\r\n      //      {\r\n      //        email: this.email, \r\n      //        password: this.password \r\n      //      })\r\n      //  })\r\n      //  .then(response => response.json())\r\n      //  .then(data => {\r\n      //    console.log(data)\r\n      //    localStorage.setItem('token', JSON.stringify(data.token));\r\n      //    localStorage.setItem('userId', JSON.stringify(data.userId));\r\n        \r\n      //  })\r\n      //  .catch(error => console.log(\"Erreur : \" + error));\r\n\r\n      \r\n     }\r\n\r\n  },\r\n\r\n  components: {\r\n    HeaderView\r\n  },\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.container{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: 50px;\r\n}\r\n\r\n.post{\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  margin-bottom: 50px;\r\n   box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.post_head{\r\n  background-color: #4E5166 ;\r\n  text-align: center;\r\n}\r\n\r\n.post_head p{\r\n  color: white;\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n}\r\n\r\n.post_body{\r\n  padding: 8px;\r\n  padding-left: 24px;\r\n  padding-right: 24px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post_body input{\r\n  width: 100%;\r\n  margin: 12px;\r\n  padding: 6px;\r\n}\r\n\r\n.post_body button{\r\n  background-color: #FD2D01;\r\n  border: 0;\r\n  padding: 6px;\r\n}\r\n\r\n.post_body button a{\r\n  text-decoration: none;\r\n  color: #fff;\r\n  font-size: 16px;\r\n}\r\n\r\n.post_body .already{\r\n  padding: 8px;\r\n}\r\n\r\n.post_body .already a{\r\n  color: #FD2D01;\r\n}\r\n.alert_error{\r\n  background-color: #FFD7D7;\r\n  padding: 12px;\r\n  margin-top: 12px;\r\n  text-align: center;\r\n}\r\n\r\n.alert_error a{\r\n \r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}