{"ast":null,"code":"import HeaderView from '@/views/HeaderView.vue';\nimport ModifyComponent from '@/components/ModifyComponent.vue';\nimport imageTest from \"@/assets/logo.png\";\nexport default {\n  name: 'HelloWorld',\n  components: {\n    HeaderView,\n    ModifyComponent\n  },\n\n  data() {\n    return {\n      isNew: false,\n      isModify: false,\n      posts: [],\n      description: '',\n      image: ''\n    };\n  },\n\n  methods: {\n    onToggleUpdate: function () {\n      this.isModify = !this.isModify;\n    },\n\n    NewPost() {\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\n      const token = JSON.parse(localStorage.getItem(\"token\"));\n      console.log('---->1', userId); // Log du Token\n\n      fetch('http://localhost:3000/api/posts', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + `${token}`\n        },\n        body: JSON.stringify({\n          userId: userId,\n          post: this.description,\n          image: imageTest,\n          prenom: 'Alex2',\n          nom: 'alex'\n        })\n      }).then(response => {\n        response.json();\n        console.log(response);\n      }).catch(error => console.log(error));\n    },\n\n    DelPost(_id) {\n      fetch('http://localhost:3000/api/posts').then(res => res.json()).then(data => {\n        this.posts = data;\n        console.log(data[1]._id);\n      }).catch(err => console.log(err.message));\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\n      const token = JSON.parse(localStorage.getItem(\"token\"));\n      fetch('http://localhost:3000/api/posts/' + `${token}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + `${token}`\n        },\n        body: JSON.stringify({\n          userId: userId\n        })\n      }).then(response => {\n        response.json();\n        console.log(response);\n      }).catch(error => console.log(error));\n    },\n\n    onFileChange(e) {\n      var files = e.target.files || e.dataTransfer.files;\n      if (!files.length) return;\n      this.createImage(files[0]);\n    },\n\n    createImage(file) {\n      var image = new Image();\n      var reader = new FileReader();\n      var vm = this;\n\n      reader.onload = e => {\n        vm.image = e.target.result;\n      };\n\n      reader.readAsDataURL(file);\n      console.log(file); //Log de l'image\n    }\n\n  },\n\n  mounted() {\n    fetch('http://localhost:3000/api/posts').then(res => res.json()).then(data => this.posts = data).catch(err => console.log(err.message));\n  }\n\n};","map":{"version":3,"mappings":"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","names":["HeaderView","ModifyComponent","imageTest","name","components","data","isNew","isModify","posts","description","image","methods","onToggleUpdate","NewPost","userId","JSON","parse","localStorage","getItem","token","console","log","fetch","method","headers","body","stringify","post","prenom","nom","then","response","json","catch","error","DelPost","_id","res","err","message","onFileChange","e","files","target","dataTransfer","length","createImage","file","Image","reader","FileReader","vm","onload","result","readAsDataURL","mounted"],"sourceRoot":"","sources":["C:\\Users\\Alex_PC\\Desktop\\P7_Projet\\_FRONT\\groupomania\\src\\views\\DashBoard.vue"],"sourcesContent":["<template>\n  <div>\n    <HeaderView />\n  </div>\n  <div class=\"container\">\n    <div v-for=\"post in posts\" :key=\"post.id\" class=\"post\">\n      <div class=\"post_head\">\n        <p>{{ post.nom }} {{ post.prenom }} le {{ post.date }}</p>\n      </div>\n      <div class=\"post_body\">\n        <img :src=\"post.imageUrl\" alt=\"\">\n        <p>{{ post.description }}</p>\n        <p>{{ post._id }}</p>\n      </div>\n      <div class=\"post_footer\">\n        <div class=\"post_footer_review\">\n          <a href=\"\"><i class=\"fa-solid fa-thumbs-up like\"></i><p> ({{ post.likes }})</p></a>\n        </div>\n        <div class=\"post_footer_modify\">\n          <a v-on:click=\"onToggleUpdate\">Modifier</a>\n          <a @click.prevent=\"DelPost(post._id)\">Supprimer</a>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"post_admin\">\n      <div class=\"post_head_admin\">\n        <p>John DOE le 30/08/2019</p>\n        <div class=\"badge\"><p>Administrateur</p></div>\n      </div>\n      <div class=\"post_body\">\n        <img src=\"@/assets/logo.png\" alt=\"\">\n        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime mollitia,\n            molestiae quas vel sint commodi repudiandae consequuntur voluptatum laborum\n            numquam blanditiis harum quisquam eius sed odit fugiat iusto fuga praesentium\n            optio, eaque rerum! Provident similique accusantium nemo autem. Veritatis\n            obcaecati tenetur iure eius earum ut molestias architecto voluptate aliquam\n            nihil, eveniet aliquid culpa officia aut! Impedit sit sunt quaerat, odit,\n            tenetur error, harum nesciunt ipsum debitis quas aliquid.</p>\n      </div>\n      <div class=\"post_footer\">\n        <div class=\"post_footer_review\">\n          <a href=\"\"><i class=\"fa-solid fa-thumbs-up like\"></i><p> (0)</p></a>\n          <a href=\"\"><i class=\"fa-solid fa-thumbs-down dislike\"></i><p> (3)</p></a>\n        </div>\n        <div class=\"post_footer_modify\">\n          <a v-on:click=\"isModify = !isModify\">Modifier</a>\n          <a>Supprimer</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-show=\"isNew\" class=\"new_modal\" >\n    <div class=\"new_modal_box\">\n      <div class=\"new_modal_box_head\">\n        <p>Nouveau Message</p>\n      </div>\n      <div class=\"new_modal_box__body\">\n        <input v-model=\"description\" type=\"text\" placeholder=\"Ã‰crire un message...\"><br>\n        <div class=\"new_modal_box_body_image\">\n          <input @change=\"onFileChange\" type=\"file\" id=\"avatar\" name=\"avatar\" accept=\"image/png, image/jpeg\">\n        </div>\n      </div>\n      <div class=\"new_modal_box_footer\">\n        <button @click.prevent=\"NewPost()\"><a>Envoyer</a></button>\n      </div>\n    </div>\n  </div>\n  <div class=\"new\" v-on:click=\"isNew = !isNew\"><a>+</a></div>\n  <ModifyComponent\n    v-if=\"isModify\"\n    :onClose=\"onToggleUpdate\"\n   />\n   \n</template>\n\n<script>\n\nimport HeaderView from '@/views/HeaderView.vue';\nimport ModifyComponent from '@/components/ModifyComponent.vue';\n\nimport imageTest from \"@/assets/logo.png\";\n\nexport default {\n  name: 'HelloWorld',\n  components: {\n    HeaderView,\n    ModifyComponent,\n  },\n  data(){\n    return{\n     isNew: false,\n     isModify: false,\n     posts: [],\n     description: '',\n     image: '',\n    }\n  },\n  methods: {\n    onToggleUpdate: function() {\n      this.isModify = !this.isModify\n    },\n    NewPost() {\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\n      const token = JSON.parse(localStorage.getItem(\"token\"));\n      console.log('---->1', userId); // Log du Token\n      fetch('http://localhost:3000/api/posts', {\n        method: 'POST',\n        headers: { \n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + `${token}`\n        },\n        body: JSON.stringify(\n          {\n            userId: userId,\n            post: this.description,\n            image: imageTest,\n            prenom: 'Alex2',\n            nom: 'alex',\n          })\n      })\n      .then(response => {\n        response.json()\n        console.log(response)\n      })\n      .catch(error => console.log(error))\n    },\n    DelPost(_id) {\n      fetch('http://localhost:3000/api/posts')\n      .then(res => res.json())\n      .then(data => {\n        this.posts = data\n        console.log(data[1]._id)\n      })\n      .catch(err => console.log(err.message))\n\n      const userId = JSON.parse(localStorage.getItem(\"userId\"));\n      const token = JSON.parse(localStorage.getItem(\"token\"));\n      fetch('http://localhost:3000/api/posts/'+ `${token}`, {\n        method: 'DELETE',\n        headers: { \n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + `${token}`\n        },\n        body: JSON.stringify(\n          {\n            userId: userId,\n          })\n      })\n      .then(response => {\n        response.json()\n        console.log(response)\n      })\n      .catch(error => console.log(error))\n    },\n    onFileChange(e) {\n      var files = e.target.files || e.dataTransfer.files;\n      if (!files.length)\n        return;\n      this.createImage(files[0]);\n    },\n    createImage(file) {\n      var image = new Image();\n      var reader = new FileReader();\n      var vm = this;\n      reader.onload = (e) => {\n        vm.image = e.target.result;\n      };\n      reader.readAsDataURL(file);\n      console.log(file) //Log de l'image\n    },\n  },\n  \n  mounted(){\n  fetch('http://localhost:3000/api/posts')\n    .then(res => res.json())\n    .then(data => this.posts = data)\n    .catch(err => console.log(err.message))\n  },\n}\n\n</script>\n\n<style scoped>\n\n.container{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 50px;\n}\n.post{\n  display: flex;\n  flex-direction: column;\n  width: 500px;\n  margin-bottom: 50px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.post_head{\n  background-color: #4E5166 ;\n}\n\n.post_head p{\n  color: white;\n  padding: 8px;\n  padding-left: 24px;\n}\n\n.post_body{\n  padding: 8px;\n  padding-left: 24px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.post_body img{\n  width: 400px;\n}\n\n.post_body p{\n  font-size: 16px;\n}\n\n.post_footer{\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px;\n  padding-left: 24px;\n}\n\n.post_footer_review{\n  display: flex;\n}\n\n.post_footer_review a{\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n}\n\n.post_footer_review i{\n  font-size: 22px;\n}\n\n.post_footer_modify a{\n  text-decoration: underline;\n}\n\n.like{\n  color: #FFD7D7;\n}\n\n.post_footer{\n  color: #FD2D01;\n  font-size: 18px;\n}\n\n.post_footer p{\n  padding: 6px;\n}\n\n.post_footer a{\n  color: #FD2D01;\n  padding: 6px;\n}\n\n.post_admin{\n  display: flex;\n  flex-direction: column;\n  width: 500px;\n  margin-bottom: 50px;\n   box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.post_head_admin{\n  background-color: #FFD7D7 ;\n  display: flex;\n  justify-content: space-between;\n}\n\n.post_head_admin p{\n  color: #FD2D01;\n  padding: 8px;\n  padding-left: 24px;\n}\n\n.post_head_admin .badge p{\n  background-color: #fff;\n  padding: 0;\n  margin-top: 8px;\n  margin-right: 10px;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n\n.new_modal{\n  display: flex;\n  flex-direction: column;\n  width: 500px;\n  margin-bottom: 120px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  margin-right: 40px;\n  background-color: #fff;\n}\n\n.new_modal_box_head{\n  background-color: #4E5166 ;\n  display: flex;\n  justify-content: space-between;\n}\n\n.new_modal_box_head p{\n  padding: 8px;\n  padding-left: 24px;\n  color: white;;\n}\n\n.new_modal_box__body{\n  padding: 8px;\n  margin-left: 36px;\n  margin-right: 36px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start\n}\n\n.new_modal_box__body input{\n  width: 100%;\n  padding-bottom: 140px;\n  padding-top: 20px;\n  padding-left: 20px;\n}\n\n.new_modal_box_body_image input{\n  padding: 0;\n}\n\n.new_modal_box_footer{\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 8px;\n  padding-left: 24px;\n}\n\n.new_modal_box_footer button{\n    background-color: #FD2D01;\n    border: 0;\n    padding: 6px;\n    margin-right: 36px;\n    margin-bottom: 24px;\n}\n\n.new_modal_box_footer a{\n    color: white;\n    text-transform: uppercase;\n    font-size: 14px;\n    padding-left: 20px;\n    padding-right: 20px;\n    text-decoration: none;\n}\n\n.new{\n  height: 64px;\n  width: 64px;\n  font-size: 64px;\n  background-color: #FD2D01;\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  border-radius: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 20px;\n  margin-right: 40px;\n  cursor: pointer;\n}\n\n.new a{\n  color: #fff;\n  margin-top: -10px;\n  text-decoration: none;\n}\n\n\n\n\n\n</style>\n"]},"metadata":{},"sourceType":"module"}